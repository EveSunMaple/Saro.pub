---
import Layout from "@layouts/Layout.astro";
import TelegramLayout from "@layouts/TelegramLayout.astro";

const dynamicItems = [
  {
    avatar: 'https://i.pravatar.cc/150?u=a042581f4e29026704d',
    channelName: 'サン猫の時間漂流',
    time: '3小时前',
    content: `<p>突然发现，Astro 的孤岛架构（Islands Architecture）和"人生碎片"这个概念不谋而合。重要的、需要交互的时刻是孤岛，而大部分静态的记忆构成了广阔的海洋。</p><p>或许，每个人的生活都是一个由无数静态HTML和几个交互式组件构成的网站吧。</p>`,
    views: '2.1k',
    comments: '32',
  },
  {
    avatar: 'https://i.pravatar.cc/150?u=a042581f4e29026704d',
    channelName: 'サン猫の時間漂流',
    time: '昨天 21:45',
    content: `<p>分享一首歌，最近一直在单曲循环。</p>
      <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener noreferrer" class="mt-2 flex items-center gap-3 p-3 border border-base-content/10 rounded-lg hover:bg-base-200/50 transition-all duration-300 not-prose no-underline group">
        <img src="https://img.youtube.com/vi/dQw4w9WgXcQ/sddefault.jpg" class="w-16 h-12 rounded object-cover group-hover:scale-105 transition-transform duration-300" alt="Youtube Thumbnail">
        <div>
          <strong class="line-clamp-2 text-sm text-base-content group-hover:text-primary transition-colors duration-300">Rick Astley - Never Gonna Give You Up</strong>
          <span class="text-xs text-base-content/60 block mt-0.5">youtube.com</span>
        </div>
      </a>
    `,
    views: '8.8k',
    comments: '128',
  },
  {
    avatar: 'https://i.pravatar.cc/150?u=a042581f4e29026704d',
    channelName: 'サン猫の時間漂流',
    time: '2天前',
    content: `<p>午后的阳光和猫，就是完美的组合。</p>
      <img src="https://loremflickr.com/640/360/cat,sleeping" alt="A sleeping cat in the sun" class="mt-2 rounded-lg object-cover w-full hover:scale-[1.02] transition-transform duration-500">
    `,
    views: '5.5k',
    comments: '66',
  },
  {
    avatar: 'https://i.pravatar.cc/150?u=a042581f4e29026704d',
    channelName: 'サン猫の時間漂流',
    time: '3天前',
    content: `<p>今天学到了一个新的 CSS 技巧，使用 backdrop-filter 可以创建非常漂亮的毛玻璃效果。现代浏览器的支持度已经很好了，可以放心使用。</p>
      <div class="mt-2 p-3 bg-base-300/20 backdrop-blur-sm rounded-lg border border-base-content/10">
        <code class="text-sm text-primary">backdrop-filter: blur(12px);</code>
      </div>
    `,
    views: '3.2k',
    comments: '45',
  }
]
---

<Layout title="首页">
  <TelegramLayout>
    {dynamicItems.map((item, index) => (
      <article class="dynamic-item group">
        <!-- 四网格布局 -->
        <div class="grid grid-cols-[auto_1fr] gap-3">
          
          <!-- 左侧列：头像和连接线 -->
          <div class="flex flex-col items-center">
            <!-- 头像 -->
            <div class="avatar mb-2">
              <div class="w-8 h-8 rounded-full ring-1 ring-primary/20 ring-offset-1 ring-offset-base-100 group-hover:ring-primary/40 transition-all duration-300">
                <img src={item.avatar} alt="Channel Avatar" />
              </div>
            </div>
            
            <!-- 连接线 (除了最后一个动态) -->
            {index < dynamicItems.length - 1 && (
              <div class="w-0.5 flex-1 bg-gradient-to-b from-primary/30 to-transparent rounded-full min-h-[1.5rem]"></div>
            )}
          </div>
          
          <!-- 右侧列：内容区域 -->
          <div class="flex-1 pb-4">
            <!-- 内容卡片 -->
            <div class="bg-base-200/30 backdrop-blur-sm rounded-xl p-4 border border-base-content/5 hover:border-primary/20 hover:bg-base-200/50 transition-all duration-300 group-hover:shadow-md group-hover:-translate-y-0.5">
              
              <!-- 头部信息 -->
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center space-x-2">
                  <h3 class="font-medium text-sm text-base-content">{item.channelName}</h3>
                  <div class="w-1 h-1 bg-base-content/30 rounded-full"></div>
                  <span class="text-xs text-base-content/60">{item.time}</span>
                </div>
              </div>
              
              <!-- 动态内容 -->
              <div class="prose prose-sm max-w-none mb-3 text-base-content/80 text-sm leading-relaxed" set:html={item.content} />
              
              <!-- 底部统计 -->
              <div class="flex items-center justify-between pt-3 border-t border-base-content/5">
                <div class="flex items-center space-x-4 text-xs text-base-content/60">
                  <div class="flex items-center space-x-1 hover:text-primary transition-colors duration-300 cursor-pointer">
                    <i class="ri-eye-line text-xs"></i>
                    <span>{item.views}</span>
                  </div>
                  <div class="flex items-center space-x-1 hover:text-primary transition-colors duration-300 cursor-pointer">
                    <i class="ri-message-3-line text-xs"></i>
                    <span>{item.comments}</span>
                  </div>
                  <div class="flex items-center space-x-1 hover:text-primary transition-colors duration-300 cursor-pointer">
                    <i class="ri-share-line text-xs"></i>
                    <span>分享</span>
                  </div>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex items-center space-x-1">
                  <button class="btn btn-ghost btn-xs btn-circle hover:btn-primary">
                    <i class="ri-heart-line text-xs"></i>
                  </button>
                  <button class="btn btn-ghost btn-xs btn-circle hover:btn-primary">
                    <i class="ri-bookmark-line text-xs"></i>
                  </button>
                </div>
              </div>
              
            </div>
          </div>
          
        </div>
      </article>
    ))}
    
    <!-- 加载更多按钮 -->
    <div class="text-center pt-6">
      <button class="btn btn-primary btn-sm">
        <i class="ri-refresh-line mr-1 text-sm"></i>
        加载更多动态
      </button>
    </div>
    
  </TelegramLayout>
</Layout>